# ドヤツール＿制作ナレッジ

## プロジェクト概要

**ツール名**: ウェビナー ラクラク  
**目的**: ウェビナーの企画・告知・運営タスクをAIで自動生成するツール  
**GitHub**: https://github.com/k-mitsumori-cmd/rakuraku-webinar-man  
**公開URL**: https://rakuraku-webinar-man.vercel.app

---

## 制作の背景と目的

元々「プレスリリース ラクラク」というツールが存在していたが、それをベースに「ウェビナータスク自動生成システム」に全面的にリファクタリング。

**主な目的**:
- ウェビナー開催時の各種タスク（告知文、企画書、チェックリスト、メール文面など）を自動生成
- B2Bマーケティングのベストプラクティスに沿った自然な日本語のコンテンツ生成
- 簡単操作で誰でも使えるツールを目指す

---

## 技術スタック

### フロントエンド
- **HTML5**: シンプルなSPA構造
- **CSS3**: モダンなデザイン、レスポンシブ対応
- **Vanilla JavaScript (ES6+)**: フレームワーク依存なし、軽量

### バックエンド
- **Vercel Serverless Functions**: APIエンドポイントとして使用
- **Node.js**: サーバーレス関数の実行環境

### AI/API
- **OpenAI GPT-4**: コンテンツ生成エンジン
- **OpenAI API**: サーバーレス関数経由で呼び出し

### デプロイ
- **Vercel**: フロントエンド + サーバーレス関数のホスティング
- **GitHub**: ソースコード管理

### 依存パッケージ
```json
{
  "openai": "^4.20.0"
}
```

---

## ファイル構成

```
rakuraku-webinar-man/
├── index.html              # メインHTML（SPA構造）
├── app.js                  # フロントエンドJavaScript（フォーム処理、API呼び出し）
├── styles.css              # スタイルシート
├── api/
│   └── generate.js         # Vercelサーバーレス関数（OpenAI API統合）
├── package.json            # 依存関係定義
├── vercel.json             # Vercel設定
├── .gitignore              # Git除外設定
├── README.md               # プロジェクト説明書
└── ドヤツール＿制作ナレッジ.md  # このファイル
```

---

## 主要機能と実装

### 1. ウェビナー情報入力フォーム

**実装ファイル**: `index.html`, `app.js`

**機能**:
- ウェビナータイトル、開催日時、開催形式、主催者情報の入力
- 登壇者情報の動的追加・削除（複数対応）
- 参加費の選択（基本無料、有料時のみ金額入力表示）
- 各種URL入力（申込フォーム、Zoom URL、アンケートURL）
- お試しボタンによるサンプルデータ投入

**特徴**:
- バリデーション機能
- リアルタイム文字数カウント（内容フィールド）
- レスポンシブデザイン対応

### 2. AIコンテンツ生成

**実装ファイル**: `api/generate.js`

**生成されるコンテンツ**:
1. **ウェビナー社内告知文**: 社内向けの開催告知
2. **企画書**: ウェビナーの概要・目的・期待される成果
3. **チェックリスト**: 運営に必要なタスク一覧
4. **SNS投稿文**: Twitter形式の投稿文
5. **集客向けメール**: 申し込みを促すマーケティングメール
6. **申し込みありがとうメール**: 申し込み確認メール
7. **リマインドメール**: 開催前のリマインドメール
8. **参加者向けお礼メール**: ウェビナー後のアンケート依頼メール

**AIプロンプト設計のポイント**:
- B2Bマーケティングのセオリーに沿った自然な日本語生成
- 不自然な表現を明示的に禁止（「〜をもたらすことを期待しています」「この機会に、〜から直接お話を伺うことができます」など）
- 不要な装飾表現の排除（「敬具」「一日をお過ごしください」など）
- 各メールタイプに応じた適切なURLの使用

### 3. タブ切り替えUI

**実装ファイル**: `index.html`, `app.js`, `styles.css`

**機能**:
- 8種類のコンテンツをタブで切り替え表示
- 各コンテンツのワンクリックコピー機能
- 再生成機能（異なるバリエーションを生成）

### 4. プログレスバーアニメーション

**実装ファイル**: `app.js`, `styles.css`

**機能**:
- SVGベースの円形プログレスバー
- 生成中の視覚的フィードバック
- スムーズなアニメーション

### 5. フォールバック機能

**実装ファイル**: `app.js`

**機能**:
- OpenAI APIが利用できない場合のテンプレートベース生成
- エラーハンドリングとユーザー通知

---

## 重要な実装ポイント

### 1. 参加費入力のUX改善

**課題**: 多くのウェビナーが無料なのに、毎回「無料」と入力する手間

**解決策**:
- ラジオボタンで「無料」「有料」を選択
- デフォルトは「無料」
- 「有料」選択時のみ金額入力フィールドを表示

**実装**:
```javascript
// 参加費タイプ変更時の処理
feeTypeInputs.forEach(input => {
    input.addEventListener('change', () => {
        if (input.value === 'paid') {
            feeAmountGroup.style.display = 'block';
            feeAmountInput.focus();
        } else {
            feeAmountGroup.style.display = 'none';
            feeAmountInput.value = '';
        }
    });
});
```

### 2. 自然な日本語生成のためのプロンプト設計

**課題**: AIが生成する文章が不自然（英語直訳調）

**解決策**:
- 禁止表現を明示的に列挙
- 各プロンプトに「日本語として自然で、ビジネスメールとして適切な表現のみを使用」と指示
- system promptでB2Bマーケティングの専門家としての役割を明確化

**例**:
```javascript
【要件】
- **重要**: 自然な日本語で作成。以下の不自然な表現は絶対に使用しない：
  - 「〜をもたらすことを期待しています」
  - 「新たな視点をもたらす」
  - 「この機会に、〜から直接お話を伺うことができます」
  - 英語を日本語に直訳したような表現全般
```

### 3. URLの適切な使い分け

**各メールタイプでのURL使用**:
- **集客向けメール**: 申込フォームURLのみ（B2Bマーケティングのベストプラクティス）
- **申し込みありがとうメール**: ウェビナー参加Zoom URL（申し込み後のみ見れるURL）
- **リマインドメール**: ウェビナー参加Zoom URL
- **参加者向けお礼メール**: アンケートフォームURL

### 4. ヘッダーのホームリンク

**実装**: ヘッダー全体（ロゴ + タイトル）をクリック可能にし、トップページに戻るリンクを追加

```html
<a href="/" class="header-content header-link">
    <div class="logo">...</div>
    <div class="header-text">...</div>
</a>
```

---

## 開発プロセスと学び

### 1. 要件の変更に対応する柔軟性

**学び**: 
- ユーザーの要望に合わせて何度もプロンプトを調整
- 不自然な表現が出ないよう、具体的な禁止表現を追加
- B2Bマーケティングのベストプラクティスを反映

### 2. UX改善の重要性

**学び**:
- 参加費入力のUX改善により、ユーザーの操作が簡素化
- デフォルト値を適切に設定することで、入力負荷を軽減

### 3. エラーハンドリング

**学び**:
- APIエラー時のフォールバック機能実装
- ユーザーに分かりやすいエラーメッセージ表示
- バリデーションをフロントエンドとバックエンドの両方で実施

### 4. Git操作とデプロイフロー

**学び**:
- 適切なコミットメッセージの重要性
- Vercelの自動デプロイ機能の活用
- ブランチ管理とプッシュのタイミング

---

## セキュリティ対策

### 1. APIキーの保護
- Vercelの環境変数で管理（`.env.local`は`.gitignore`に含まれる）
- フロントエンドにAPIキーを露出しない
- サーバーレス関数経由でのみOpenAI APIを呼び出し

### 2. CORS設定
```javascript
res.setHeader('Access-Control-Allow-Origin', '*');
res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');
res.setHeader('Access-Control-Allow-Headers', 'Content-Type');
```

### 3. バリデーション
- フロントエンドでの入力チェック
- バックエンドでの再チェック（必須項目の確認）

---

## デプロイ手順

### GitHub公開

1. リポジトリ作成
```bash
git init
git add .
git commit -m "Initial commit: ウェビナータスク自動生成システム"
git branch -M main
git remote add origin https://github.com/k-mitsumori-cmd/rakuraku-webinar-man.git
git push -u origin main
```

### Vercel公開

1. Vercelにログイン（GitHub連携）
2. 「Add New...」→「Project」→「Import Git Repository」
3. `rakuraku-webinar-man`を選択
4. 環境変数を設定：
   - **Key**: `OPENAI_API_KEY`
   - **Value**: （OpenAI APIキー）
5. 「Deploy」をクリック
6. 自動デプロイ完了

### 更新方法

```bash
git add .
git commit -m "更新内容"
git push
```

Vercelが自動的に再デプロイします。

---

## カスタマイズ方法

### サンプルデータの変更

`app.js`の`SAMPLE_DATA_ARRAY`を編集：

```javascript
const SAMPLE_DATA_ARRAY = [
    {
        title: '...',
        eventDate: '...',
        // ...
    }
];
```

### フォーム項目の追加

1. `index.html`: 入力フィールドを追加
2. `app.js`: フォームデータの取得処理を追加
3. `api/generate.js`: APIでデータを受け取り、プロンプトに反映

### デザインの変更

`styles.css`を編集：
- カラーパレット（`:root`変数）
- レイアウト（Flexbox、Grid）
- レスポンシブブレークポイント

### AIプロンプトの調整

`api/generate.js`の各プロンプト変数を編集：
- `internalPrompt`: 社内告知文
- `marketingPrompt`: 集客向けメール
- `thanksPrompt`: 申し込みありがとうメール
- など

---

## トラブルシューティング

### OpenAI APIキーが設定されていない

**エラー**: `OpenAI APIキーが設定されていません`

**解決策**:
1. Vercelダッシュボードで環境変数を確認
2. `OPENAI_API_KEY`が正しく設定されているか確認
3. デプロイ後、数分待ってから再試行

### CORSエラー

**エラー**: `Access-Control-Allow-Origin`エラー

**解決策**:
- `api/generate.js`のCORS設定を確認
- Vercelのサーバーレス関数設定を確認

### 生成された文章が不自然

**解決策**:
- `api/generate.js`のプロンプトを調整
- 禁止表現リストに不自然な表現を追加
- system promptを強化

---

## 今後の改善案

### 機能追加
- [ ] 複数言語対応
- [ ] 生成履歴の保存機能
- [ ] PDF出力機能
- [ ] テンプレートのカスタマイズ機能

### UX改善
- [ ] リアルタイムプレビュー機能
- [ ] ドラッグ&ドロップでの画像追加
- [ ] テーマ切り替え（ダークモード）

### パフォーマンス
- [ ] 生成速度の最適化
- [ ] キャッシュ機能の実装
- [ ] プログレスバーの精度向上

---

## 参考資料

- [OpenAI API Documentation](https://platform.openai.com/docs)
- [Vercel Documentation](https://vercel.com/docs)
- [B2Bマーケティングのベストプラクティス](https://www.google.com/search?q=B2B+marketing+best+practices)

---

## 制作日時

**初回制作**: 2025年12月  
**最終更新**: 2025年12月5日

---

## ライセンス

MIT

---

## サポート

問題や質問がある場合は、GitHubのIssueを作成してください。

**GitHub**: https://github.com/k-mitsumori-cmd/rakuraku-webinar-man
